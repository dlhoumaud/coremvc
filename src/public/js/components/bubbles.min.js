export default app=>{app.component("bubbles",{props:{number:{type:Number,default:15}},data(){return{bubbles:[]}},template:`\n            <div>\n                \x3c!-- Création des bulles en fonction du nombre spécifié --\x3e\n                <div\n                    v-for="(bubble, index) in bubbles"\n                    :key="index"\n                    class="bubble"\n                    :style="bubble.style"\n                    @animationend="handleAnimationEnd($event)"\n                    :data-index="index"\n                ></div>\n            </div>\n        `,methods:{getBubbleStyle(index){const size=this.getRandomSize();const position=this.getRandomPosition(index);const animationName=`float_${index}`;const animationDuration=this.getRandomDuration();const borderRadius=this.getRandomBorderRadius();const color=this.getRandomColor();const translateY=this.getRandomTranslateY();const translateX=this.getRandomTranslateX();const scale=this.getRandomScale();this.injectKeyframes(animationName,translateY,translateX,scale);this.bubbles.push({style:{width:`${size.width}px`,height:`${size.height}px`,top:`${position.top}%`,left:`${position.left}%`,animation:`${animationName} ${animationDuration}s ease-in-out`,transition:`background-color 3s ease-in-out`,borderRadius:borderRadius,filter:"blur(3px)",opacity:.5,backgroundColor:`${color}`,position:"fixed"},position:position,animation:animationName,backgroundColor:color,y:translateY,x:translateX,s:scale,duration:animationDuration})},injectKeyframes(animationName,translateY,translateX,scale){const styleSheet=document.styleSheets[0];const keyframes=`\n                    @keyframes ${animationName} {\n                        0% {\n                            transform: translateY(0) scale(1);\n                        }\n                        50% {\n                            transform: translateY(${translateY}px) translateX(${translateX}px) scale(${scale});\n                        }\n                        100% {\n                            transform: translateY(0) scale(1);\n                        }\n                    }\n                `;styleSheet.insertRule(keyframes,styleSheet.cssRules.length)},handleAnimationEnd(event){event.target.style.animationPlayState="paused";event.target.style.animation="none";const index=parseInt(event.target.getAttribute("data-index"));const bubble=this.bubbles[index];const newTranslateY=this.getRandomTranslateY();const newTranslateX=this.getRandomTranslateX();const newScale=this.getRandomScale();const color=this.getRandomColor();this.injectKeyframes(bubble.animation,newTranslateY,newTranslateX,newScale);const newDuration=this.getRandomDuration();setTimeout((()=>{event.target.style.backgroundColor=color;event.target.style.animation=`${bubble.animation} ${newDuration}s ease-in-out`;event.target.style.animationPlayState="running"}),100);this.bubbles[index].y=newTranslateY;this.bubbles[index].x=newTranslateX;this.bubbles[index].s=newScale;this.bubbles[index].backgroundColor=color;this.bubbles[index].duration=newDuration},getRandomSize(){const width=Math.floor(Math.random()*(50-5+1)+5);return{width:width,height:width}},getRandomPosition(index){let top,left;let isCollision=true;let attempts=0;while(isCollision&&attempts<50){top=Math.floor(Math.random()*(100-5+1)+5);left=Math.floor(Math.random()*100);isCollision=this.checkCollision(top,left,index);attempts++}return{top:top,left:left}},checkCollision(top,left,index){for(let i=0;i<index;i++){const existingBubble=this.bubbles[i];const distance=this.calculateDistance(top,left,existingBubble.position.top,existingBubble.position.left);if(distance<10){return true}}return false},calculateDistance(top1,left1,top2,left2){const dx=top1-top2;const dy=left1-left2;return Math.sqrt(dx*dx+dy*dy)},getRandomDuration(){return(Math.random()*(12-6)+6).toFixed(2)},getRandomBorderRadius(){return"50%"},getRandomColor(){const colors=["#26d9e4","#b730e0","#ffffff","#ac297a","#d68b5b","#5b8ad6"];return colors[Math.floor(Math.random()*colors.length)]},getRandomTranslateY(){return Math.floor(Math.random()*(240- -240+1)+-240)},getRandomTranslateX(){return Math.floor(Math.random()*(240- -240+1)+-240)},getRandomScale(){return(Math.random()*(2.8- -2.8+1)+-2.8).toFixed(2)}},mounted(){for(let i=0;i<this.number;i++){this.getBubbleStyle(i)}}})};